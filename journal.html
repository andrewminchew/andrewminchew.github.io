<!DOCTYPE html>
<html>
<head>
	<meta charset="UTF-8">
	<title>Microjournal</title>
	<link rel="stylesheet" href="style.css">
<style>
	body {
	font-family: sans-serif;
	padding-bottom: 70px;
	overflow-y: scroll;
}

form {
	position: fixed;
	bottom: 0;
	left: 0;
	right: 0;
	display: flex;
	align-items: center;
	padding: 10px;
	background-color: #fff;
	box-shadow: 0 -2px 5px rgba(0,0,0,0.1);
	z-index: 1;
}

textarea {
	height: 30px;
	flex: 1;
	margin-right: 10px;
	padding: 5px;
	border: 1px solid #ccc;
	border-radius: 5px;
	resize: none;
	font-size: 14px;
	line-height: 1.4;
}

button {
	padding: 5px 10px;
	border: none;
	border-radius: 5px;
	background-color: #007bff;
	color: #fff;
	font-weight: bold;
	cursor: pointer;
}

button:hover {
	background-color: #0069d9;
}

#entries-container {
	padding-bottom: 80px;
}

.entry {
	background-color: #eee;
	padding: 10px;
	margin-bottom: 10px;
}

.entry p {
	margin: 0;
}

.entry span {
	font-size: 12px;
	color: #888;
}
</style>
	</head>
<body>
	<div id="entries-container"></div>
	<form>
		<textarea id="journal-entry"></textarea>
		<button id="submit-button" type="submit">Submit</button>
	</form>
<script>
// Get form elements and entries container
const form = document.querySelector('form');
const journalEntry = document.querySelector('#journal-entry');
const submitButton = document.querySelector('#submit-button');
const entriesContainer = document.querySelector('#entries-container');

// Handle form submission
form.addEventListener('submit', function(event) {
	event.preventDefault(); // prevent default form submission behavior

	// Save journal entry to local storage
	let entries = localStorage.getItem('entries') ? JSON.parse(localStorage.getItem('entries')) : [];
	let entry = {
		text: journalEntry.value,
		date: new Date()
	};
	entries.push(entry);
	localStorage.setItem('entries', JSON.stringify(entries));

	// Clear journal entry textarea
	journalEntry.value = '';

	// Display new journal entry at the bottom of the entries container
	displayEntry(entry);
	entriesContainer.scrollTop = entriesContainer.scrollHeight; // scroll to bottom
});

// Handle keydown event on journal entry input
journalEntry.addEventListener('keydown', function(event) {
	if (event.keyCode === 13 && !event.shiftKey) { // submit form when Enter key is pressed (without Shift)
		event.preventDefault(); // prevent default behavior (adding a new line)
		form.submit(); // submit form
	}
});

// Display a single journal entry
function displayEntry(entry) {
	let entryText = entry.text;
	let entryHTML = `
		<div class="entry">
			<p>${entryText}</p>
			<span>${entry.date.toLocaleTimeString()}</span>
		</div>
	`;
	entriesContainer.insertAdjacentHTML('beforeend', entryHTML);
}

// Display all journal entries from today
function displayEntries() {
	entriesContainer.innerHTML = '';
	let entries = localStorage.getItem('entries') ? JSON.parse(localStorage.getItem('entries')) : [];
	let today = new Date().toLocaleDateString();
	entries.forEach(function(entry) {
		if (new Date(entry.date).toLocaleDateString() === today) {
			displayEntry(entry);
		}
	});
}

// Initial page load
displayEntries();
	</script>
</body>
</html>
