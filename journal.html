<!DOCTYPE html>
<html>
<head>
	<title>Daily Microjournal</title>
  	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0,user-scalable=0"/>
	
    <link rel="apple-touch-icon" href="/img/pencil.png">
    <meta name="apple-mobile-web-app-capable" content="yes" />

  <!-- HTML Meta Tags -->
  <title>Daily Microjournal with Chat GPT</title>
  <meta name="description" content="Just a little project I put together with ChatGPT.">

  <!-- Facebook Meta Tags -->
  <meta property="og:url" content="https://andrewminchew.com/journal.html">
  <meta property="og:type" content="website">
  <meta property="og:title" content="Daily Microjournal with Chat GPT">
  <meta property="og:description" content="Just a little project I put together with ChatGPT.">

  <!-- Twitter Meta Tags -->
  <meta name="twitter:card" content="summary_large_image">
  <meta property="twitter:domain" content="andrewminchew.com">
  <meta property="twitter:url" content="https://andrewminchew.com/journal.html">
  <meta name="twitter:title" content="Daily Microjournal with Chat GPT">
  <meta name="twitter:description" content="Just a little project I put together with ChatGPT.">

  <!-- Meta Tags Generated via https://www.opengraph.xyz -->
        
	<style>
		nothing {
  outline:1px solid red;
}
#disclaimer {
  position:fixed;
  background-color:#c4c4c4;
  max-width:500px;
}
#disclaimer * {
  margin:5px;
}
#dismiss-disclaimer {
  display:block;
  width:max-content;
  margin-top:10px;
}
body {
  font-family: Arial, sans-serif;
  max-width:500px;
  margin:auto;
  position:fixed;
  top:0px;
  bottom:0px;
  left:0px;
  right:0px;
  font-size:16px;
}

h1 {
  text-align: center;
}

label {
  display: block;
  margin-bottom: 10px;
}

input[type="text"] {
  width: 100%;
  box-sizing: border-box;
  margin-left:5px;
  height:2.5em;
}
#input-holder {
  width:100%;
  display:flex;
  align-items:center;
  position:absolute;
  bottom:0px; 
  height:3em;
  gap:5px;
}
#output-container div {
  margin-top:3px;
  padding-top:3px;
  border-top:1px solid black;
  
}
button {
  padding: 10px;
  background-color: #4CAF50;
  color: white;
  border: none;
  cursor: pointer;
  height:2.5em;
  width:2.5em;
  margin-right:5px;
}

button:hover {
  background-color: #3e8e41;
}

#output-container {
  overflow-y:scroll;
  height:calc(100% - 3em);
  padding:0px 5px;
}

.timestamp {
  color: #999;
  font-size: 12px;
  display:block;
}
	</style>
</head>
<body>
  <div id="disclaimer">
    <p>DISCLAIMER: This project was created as a personal project and is not intended for production use. While we have made every effort to ensure the quality and security of the code, there may be bugs or vulnerabilities that we are not aware of. Additionally, we cannot guarantee that the performance of the application will meet your expectations. Please use this project at your own risk.
      <button id="dismiss-disclaimer">I&nbsp;get&nbsp;it.</button>
    </p>
  </div>
	<div id="output-container"></div>
	<div id="input-holder"><input type="text" id="input-field">
	<button id="submit-btn">&gt;</button>
  </div>

	<script>const dismissBtn = document.getElementById('dismiss-disclaimer');
const disclaimer = document.getElementById('disclaimer');

dismissBtn.addEventListener('click', () => {
  disclaimer.style.display = 'none';
});


const inputField = document.getElementById('input-field');
const submitBtn = document.getElementById('submit-btn');
const outputContainer = document.getElementById('output-container');

submitBtn.addEventListener('click', () => {
  submitForm();
});

inputField.addEventListener('keydown', (event) => {
  if (event.key === 'Enter') {
    event.preventDefault();
    submitForm();
  }
});

function submitForm() {
  const inputValue = inputField.value;
  if (inputValue) {
    const timestamp = new Date().toLocaleString();
    let itemsArray = localStorage.getItem('items') ? JSON.parse(localStorage.getItem('items')) : [];
    itemsArray.push({ text: inputValue, timestamp });
    localStorage.setItem('items', JSON.stringify(itemsArray));
    inputField.value = '';
    renderItems();
  }
}

function renderItems() {
  let itemsArray = localStorage.getItem('items') ? JSON.parse(localStorage.getItem('items')) : [];
  outputContainer.innerHTML = '';
  if (itemsArray.length) {
    itemsArray.forEach((item) => {
      const itemElement = document.createElement('div');
      itemElement.innerHTML = `<span class="timestamp">${item.timestamp}</span>${item.text}`;
      outputContainer.appendChild(itemElement);
    });
    outputContainer.scrollTop = outputContainer.scrollHeight;
  } else {
    outputContainer.innerHTML = 'No items in local storage.';
  }
}

renderItems();
</script>
</body>
</html>
